


<textarea rows="10" cols="10" style="width: 100%" id="text-demo-1">
var canvas = document.getElementById(canvasId);
canvas.width = 100;
canvas.height = 100;
var ctx = canvas.getContext('2d');
ctx.clearRect(0, 0, canvas.width, canvas.height);

ctx.beginPath();
ctx.strokeStyle = "red";
ctx.moveTo(0,0);
ctx.lineTo(100,100);
ctx.stroke();</textarea><br>
<button type="button" onclick="runIt('text-demo-1', 'canvas-demo-1')">Run It</button>

<canvas id="canvas-demo-1" width="100" height="100" style="margin: auto; border: black; border-style: solid; border-width: 1px;"></canvas><br>

<script type='text/javascript'>
var textDemo = CodeMirror.fromTextArea(document.getElementById("text-demo-1"));

function runIt(textBox, canvasId) {
    eval(textDemo.getValue());
}
</script>